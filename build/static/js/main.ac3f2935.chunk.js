(this["webpackJsonpzones-layout"]=this["webpackJsonpzones-layout"]||[]).push([[0],{14:function(e,t,a){e.exports={zones:"AdminPanel_zones__3DwSJ",zone:"AdminPanel_zone__2F3c2",zoneTitle:"AdminPanel_zoneTitle__1HiWl",title:"AdminPanel_title__11Zqu",container:"AdminPanel_container__3eCw1",rightPanel:"AdminPanel_rightPanel__22G42",joystickContainer:"AdminPanel_joystickContainer__2BP-F",joystickButtons:"AdminPanel_joystickButtons__2e66-",joystickTopArrow:"AdminPanel_joystickTopArrow__204dw",joystickBottomArrow:"AdminPanel_joystickBottomArrow__1VgBf",joystickLeftArrow:"AdminPanel_joystickLeftArrow__23CaZ",joystickRightArrow:"AdminPanel_joystickRightArrow__3b0F4",joystickRotateRight:"AdminPanel_joystickRotateRight__16U1K",joystickRotateLeft:"AdminPanel_joystickRotateLeft__14qMv",joystickZoomIn:"AdminPanel_joystickZoomIn__3CKfw",joystickZoomOut:"AdminPanel_joystickZoomOut__PKJAe",broadcast:"AdminPanel_broadcast__2la3F",broadcastContainer:"AdminPanel_broadcastContainer__z84D9",prevStateButton:"AdminPanel_prevStateButton__2x7pt",actionsContainer:"AdminPanel_actionsContainer__1rHKd",actionsCreate:"AdminPanel_actionsCreate__3z6kn",actionsApply:"AdminPanel_actionsApply__4yOBR",actionsCancel:"AdminPanel_actionsCancel__1FGU4"}},29:function(e,t,a){e.exports={page:"PageLayout_page__2ddSV",navbar:"PageLayout_navbar__c0dvT",buttonsGroup:"PageLayout_buttonsGroup__1ehu0",button:"PageLayout_button__e9sQ7",buttonActive:"PageLayout_buttonActive__3Y8HV",content:"PageLayout_content__1-Xq7"}},32:function(e,t,a){e.exports={maps:"MnemonicScheme_maps__3xjpY",minimapWrapper:"MnemonicScheme_minimapWrapper__1zZap",cameras:"MnemonicScheme_cameras__SPeUA",camera:"MnemonicScheme_camera__169tT"}},38:function(e,t,a){e.exports={broadcast:"OnlineCamera_broadcast__2TFg0",actions:"OnlineCamera_actions__2IymO",actionsArchive:"OnlineCamera_actionsArchive__fpBTJ",actionsGoBack:"OnlineCamera_actionsGoBack__1k7eK",actionsEdit:"OnlineCamera_actionsEdit__16MNs"}},46:function(e,t,a){e.exports={cameras:"Online_cameras__1R824",camera:"Online_camera__1KAV9",cameraActive:"Online_cameraActive___HYUK",active:"Online_active__2SRla"}},59:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a.n(n),i=a(52),o=a.n(i),s=(a(59),a(13)),r=a(26),l=a(16),u=a(5),j=c.a.createContext({fullMapRef:{current:null},fullMapXPosition:0,fullMapYPosition:0,setFullMapXPosition:function(){},setFullMapYPosition:function(){},miniMapRef:{current:null},miniMapXPosition:0,miniMapYPosition:0,setMiniMapXPosition:function(){},setMiniMapYPosition:function(){},scale:1,setScale:function(){},scaleDelta:0,setScaleDelta:function(){}}),d=function(e){var t=e.children,a=Object(n.useRef)(null),i=Object(n.useRef)(null),o=c.a.useState(0),s=Object(l.a)(o,2),r=s[0],d=s[1],m=c.a.useState(0),b=Object(l.a)(m,2),_=b[0],h=b[1],O=c.a.useState(0),f=Object(l.a)(O,2),p=f[0],v=f[1],x=c.a.useState(0),g=Object(l.a)(x,2),P=g[0],y=g[1],A=c.a.useState(1),k=Object(l.a)(A,2),M=k[0],N=k[1],S=c.a.useState(0),C=Object(l.a)(S,2),w=C[0],R=C[1];return Object(u.jsx)(j.Provider,{value:{fullMapRef:a,fullMapXPosition:r,fullMapYPosition:_,setFullMapXPosition:d,setFullMapYPosition:h,miniMapRef:i,miniMapXPosition:p,miniMapYPosition:P,setMiniMapXPosition:v,setMiniMapYPosition:y,scale:M,setScale:N,scaleDelta:w,setScaleDelta:R},children:t})};var m=a.p+"static/media/zones-plan.fbffd0f7.jpeg",b=a(53),_=function(){var e=c.a.useRef(null),t=c.a.useContext(j),a=t.miniMapRef,n=t.setMiniMapXPosition,i=t.setMiniMapYPosition,o=t.fullMapXPosition,s=t.fullMapYPosition,l=t.scale,d={width:window.innerWidth/l,height:window.innerHeight/l};return Object(u.jsx)(b.Stage,{width:271,height:271,ref:a,scaleX:.1355,scaleY:.1355,children:Object(u.jsx)(r.b,{id:"viewbox",children:Object(u.jsx)(r.d,{x:o,y:s,onDragMove:function(){if(null!==e.current){var t=e.current.getPosition(),a=t.x,c=t.y;n(-1*a),i(-1*c)}},draggable:!0,width:d.width,height:d.height,fill:"rgba(86, 204, 242, 0.1)",stroke:"#2d9cdb",strokeWidth:2,ref:e})})})},h=function(){var e=function(e,t){var a=c.a.useState({image:void 0,status:"loading"}),n=Object(l.a)(a,2),i=n[0],o=n[1];return c.a.useEffect((function(){if(e){var a=document.createElement("img");return a.addEventListener("load",n),a.addEventListener("error",c),t&&(a.crossOrigin=t),a.src=e,function(){a.removeEventListener("load",n),a.removeEventListener("error",c),o({image:void 0,status:"loading"})}}function n(){o({image:a,status:"loaded"})}function c(){o({image:void 0,status:"failed"})}}),[e,t]),i}(m).image,t=c.a.useContext(j),a=t.fullMapRef,n=t.setFullMapXPosition,i=t.setFullMapYPosition,o=t.scale,s=t.setScale;return Object(u.jsx)("div",{children:Object(u.jsx)(r.e,{width:2e3,height:2e3,scaleX:o,scaleY:o,onDragMove:function(){if(null!==a.current){var e=a.current.getPosition(),t=e.x,c=e.y;n(-t),i(-c)}},draggable:!0,onWheel:function(e){if(null!==a.current){var t=e.evt.deltaY>0?1.03*o:o/1.03;s(t)}},ref:a,children:Object(u.jsx)(r.b,{id:"stuffToShow",children:Object(u.jsx)(r.a,{image:e})})})})},O=a(27),f=a(29),p=a.n(f),v=function(e){var t=e.children;return Object(u.jsxs)("div",{className:p.a.page,children:[Object(u.jsx)("div",{className:p.a.navbar,children:Object(u.jsxs)("div",{className:p.a.buttonsGroup,children:[Object(u.jsx)(O.c,{to:"/mnemonic-scheme",className:p.a.button,activeClassName:p.a.buttonActive,children:"\u041c\u043d\u0435\u043c\u043e\u0441\u0445\u0435\u043c\u0430"}),Object(u.jsx)(O.c,{to:"/online",className:p.a.button,activeClassName:p.a.buttonActive,children:"\u041e\u043d\u043b\u0430\u0439\u043d"})]})}),Object(u.jsx)("div",{className:p.a.content,children:t})]})},x=a(32),g=a.n(x),P=function(){var e=function(e){localStorage.setItem("activeCamera",JSON.stringify({cameraTitle:e,lastUpdate:new Date}))};return Object(u.jsx)(v,{children:Object(u.jsx)(d,{children:Object(u.jsxs)("div",{className:g.a.maps,children:[Object(u.jsx)(h,{}),Object(u.jsx)("div",{className:g.a.minimapWrapper,children:Object(u.jsx)(_,{})}),Object(u.jsxs)("div",{className:g.a.cameras,children:[Object(u.jsx)("button",{className:g.a.camera,onClick:function(){return e("\u041a\u0430\u043c\u0435\u0440\u0430 1")},children:"\u041a\u0430\u043c\u0435\u0440\u0430 1"}),Object(u.jsx)("button",{className:g.a.camera,onClick:function(){return e("\u041a\u0430\u043c\u0435\u0440\u0430 2")},children:"\u041a\u0430\u043c\u0435\u0440\u0430 2"}),Object(u.jsx)("button",{className:g.a.camera,onClick:function(){return e("\u041a\u0430\u043c\u0435\u0440\u0430 3")},children:"\u041a\u0430\u043c\u0435\u0440\u0430 3"}),Object(u.jsx)("button",{className:g.a.camera,onClick:function(){return e("\u041a\u0430\u043c\u0435\u0440\u0430 4")},children:"\u041a\u0430\u043c\u0435\u0440\u0430 4"})]})]})})})},y=a(31),A=a(14),k=a.n(A),M=function(){var e=c.a.useState([]),t=Object(l.a)(e,2),a=t[0],n=t[1],i=c.a.useRef(!1),o=c.a.useRef(null),s=c.a.useState({width:0,height:0}),j=Object(l.a)(s,2),d=j[0],m=j[1];return c.a.useEffect((function(){o.current&&m({width:o.current.clientWidth,height:o.current.clientHeight})}),[o.current]),Object(u.jsxs)(v,{children:[Object(u.jsx)("p",{className:k.a.title,children:"\u043a\u0430\u043c\u0435\u0440\u0430 123123423"}),Object(u.jsxs)("div",{className:k.a.container,children:[Object(u.jsx)("div",{className:k.a.broadcastContainer,children:Object(u.jsxs)("div",{className:k.a.broadcast,ref:o,children:[Object(u.jsx)("button",{className:k.a.prevStateButton,onClick:function(){return n((function(e){return e.slice(0,e.length-1)}))},children:"\u2190"}),Object(u.jsx)(r.e,{width:d.width,height:d.height,onMouseDown:function(e){var t;i.current=!0;var a=null===(t=e.target.getStage())||void 0===t?void 0:t.getPointerPosition();n((function(e){return[].concat(Object(y.a)(e),[[a.x,a.y]])}))},onMousemove:function(e){if(i.current){var t=e.target.getStage().getPointerPosition();n((function(e){return[].concat(Object(y.a)(e.slice(0,e.length-1)),[[].concat(Object(y.a)(e[e.length-1]),[t.x,t.y])])}))}},onMouseUp:function(){i.current=!1,n((function(e){var t=e[e.length-1];return[].concat(Object(y.a)(e.slice(0,e.length-1)),[[].concat(Object(y.a)(t),[t[0],t[1]])])}))},children:Object(u.jsx)(r.b,{children:a.map((function(e,t){return Object(u.jsx)(r.c,{points:e,stroke:"red",strokeWidth:2,tension:.5,lineCap:"round",globalCompositeOperation:"source-over",fill:"rgba(255, 0, 0, 0.2)",closed:t!==a.length-1||!i.current},t)}))})})]})}),Object(u.jsxs)("div",{className:k.a.rightPanel,children:[Object(u.jsx)("div",{className:k.a.joystickContainer,children:Object(u.jsxs)("div",{className:k.a.joystickButtons,children:[Object(u.jsx)("button",{className:k.a.joystickTopArrow,children:"\u2191"}),Object(u.jsx)("button",{className:k.a.joystickBottomArrow,children:"\u2193"}),Object(u.jsx)("button",{className:k.a.joystickLeftArrow,children:"\u2190"}),Object(u.jsx)("button",{className:k.a.joystickRightArrow,children:"\u2192"}),Object(u.jsx)("button",{className:k.a.joystickRotateRight,children:"\u27f3"}),Object(u.jsx)("button",{className:k.a.joystickRotateLeft,children:"\u27f2"}),Object(u.jsx)("button",{className:k.a.joystickZoomIn,children:"+"}),Object(u.jsx)("button",{className:k.a.joystickZoomOut,children:"\u2212"})]})}),Object(u.jsxs)("div",{className:k.a.actionsContainer,children:[Object(u.jsx)("button",{className:k.a.actionsCreate,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),Object(u.jsx)("button",{className:k.a.actionsApply,children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(u.jsx)("button",{className:k.a.actionsCancel,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})]})},N=a(46),S=a.n(N),C=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],i=c.a.useState(["\u0417\u043e\u043d\u0430 1 \u0423\u043f\u0430\u043a\u043e\u0432\u043e\u0447\u043d\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430 3","\u0417\u043e\u043d\u0430 2 \u0423\u043f\u0430\u043a\u043e\u0432\u043e\u0447\u043d\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430 2","\u0417\u043e\u043d\u0430 3 \u0423\u043f\u0430\u043a\u043e\u0432\u043e\u0447\u043d\u0430\u044f \u043c\u0430\u0448\u0438\u043d\u0430 1","\u0417\u043e\u043d\u0430 4 \u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043f\u043e\u0434\u0434\u043e\u043d\u043e\u0432","\u0417\u043e\u043d\u0430 5 \u0421\u0442\u0440\u0435\u0439\u0447-\u0425\u0443\u0443\u0434","\u0417\u043e\u043d\u0430 6 \u0428\u0442\u0430\u0431\u0435\u043b\u0435\u0440"]),o=Object(l.a)(i,1)[0],s=c.a.useState(null),r=Object(l.a)(s,2),j=(r[0],r[1]),d=c.a.useState(!1),m=Object(l.a)(d,2),b=(m[0],m[1]),_=c.a.useState([]),h=Object(l.a)(_,2),f=(h[0],h[1],c.a.useRef(!1),c.a.useRef({cameraTitle:"",lastUpdate:new Date}));return c.a.useEffect((function(){var e=JSON.parse(localStorage.getItem("activeCamera")||"null");e.current&&(f.current=e);var t=setInterval((function(){var e=JSON.parse(localStorage.getItem("activeCamera")||"null");e&&new Date(e.lastUpdate)>new Date(f.current.lastUpdate)&&(f.current=e,j(e.cameraTitle),b(!0))}),100);return function(){return clearInterval(t)}}),[]),Object(u.jsxs)(v,{children:[Object(u.jsx)("button",{style:{position:"absolute",top:15,left:70},onClick:function(){return n((function(e){return!e}))},children:"\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(u.jsx)("div",{className:S.a.cameras,children:o.map((function(e,t){return Object(u.jsx)(O.b,{to:"/online/camera",className:"".concat(S.a.camera," ").concat(2===t&&a?S.a.cameraActive:"")},e)}))})]})},w=a(38),R=a.n(w),B=function(){var e=Object(s.g)();return Object(u.jsxs)(v,{children:[Object(u.jsx)("div",{className:R.a.broadcast}),Object(u.jsxs)("div",{className:R.a.actions,children:[Object(u.jsx)("button",{className:R.a.actionsArchive,children:"\u0412 \u0430\u0440\u0445\u0438\u0432"}),Object(u.jsx)("button",{className:R.a.actionsGoBack,onClick:e.goBack,children:"\u041e\u0431\u0440\u0430\u0442\u043d\u043e"}),Object(u.jsx)(O.b,{className:R.a.actionsEdit,to:"/admin-panel",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043c\u0435\u0440\u0443"})]})]})};var Y=function(){return Object(u.jsxs)(s.d,{children:[Object(u.jsx)(s.b,{path:"/mnemonic-scheme",component:P}),Object(u.jsx)(s.b,{path:"/admin-panel",component:M}),Object(u.jsx)(s.b,{path:"/online",component:C,exact:!0}),Object(u.jsx)(s.b,{path:"/online/camera",component:B}),Object(u.jsx)(s.a,{to:"/admin-panel"})]})};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(O.a,{children:Object(u.jsx)(Y,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.ac3f2935.chunk.js.map