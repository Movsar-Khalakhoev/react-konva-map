{"version":3,"sources":["pages/AdminPanel/AdminPanel.module.sass","components/PageLayout/PageLayout.module.sass","pages/MnemonicScheme/MnemonicScheme.module.sass","pages/OnlineCamera/OnlineCamera.module.sass","pages/Online/Online.module.sass","context/ZonesContext.tsx","assets/zones-plan.jpeg","components/MiniMap.tsx","components/FullMap.tsx","hooks/useImage.tsx","components/PageLayout/PageLayout.tsx","pages/MnemonicScheme/MnemonicScheme.tsx","pages/AdminPanel/AdminPanel.tsx","pages/Online/Online.tsx","pages/OnlineCamera/OnlineCamera.tsx","App.tsx","index.tsx"],"names":["module","exports","ZonesContext","React","createContext","fullMapRef","current","fullMapXPosition","fullMapYPosition","setFullMapXPosition","setFullMapYPosition","miniMapRef","miniMapXPosition","miniMapYPosition","setMiniMapXPosition","setMiniMapYPosition","scale","setScale","scaleDelta","setScaleDelta","ZonesProvider","children","useRef","useState","Provider","value","MiniMap","viewBoxRef","useContext","viewDimensions","width","window","innerWidth","height","innerHeight","ref","scaleX","MINI_MAP_WIDTH","scaleY","MINI_MAP_HEIGHT","id","x","y","onDragMove","getPosition","draggable","fill","stroke","strokeWidth","FullMap","image","url","crossOrigin","undefined","status","state","setState","useEffect","img","document","createElement","addEventListener","onload","onerror","src","removeEventListener","useImage","zonesPlanImage","onWheel","event","newScale","evt","deltaY","PageLayout","className","styles","page","navbar","buttonsGroup","to","button","activeClassName","buttonActive","content","MnemonicScheme","setActiveCamera","cameraTitle","localStorage","setItem","JSON","stringify","lastUpdate","Date","maps","minimapWrapper","cameras","camera","onClick","AdminPanel","lines","setLines","isDrawing","broadcastRef","broadcastSize","setBroadcastSize","clientWidth","clientHeight","title","container","broadcastContainer","broadcast","prevStateButton","prevState","slice","length","onMouseDown","e","pos","target","getStage","getPointerPosition","onMousemove","point","onMouseUp","lastLine","map","line","i","points","tension","lineCap","globalCompositeOperation","closed","rightPanel","joystickContainer","joystickButtons","joystickTopArrow","joystickBottomArrow","joystickLeftArrow","joystickRightArrow","joystickRotateRight","joystickRotateLeft","joystickZoomIn","joystickZoomOut","actionsContainer","actionsCreate","actionsApply","actionsCancel","Online","isActiveCamera","setIsActiveCamera","setActiveZone","setIsModalOpen","activeCamera","activeCameraFromLS","parse","getItem","activeCameraListener","setInterval","clearInterval","style","position","top","left","index","cameraActive","OnlineCamera","history","useHistory","actions","actionsArchive","actionsGoBack","goBack","actionsEdit","App","path","component","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"sGACAA,EAAOC,QAAU,CAAC,MAAQ,0BAA0B,KAAO,yBAAyB,UAAY,8BAA8B,MAAQ,0BAA0B,UAAY,8BAA8B,WAAa,+BAA+B,kBAAoB,sCAAsC,gBAAkB,oCAAoC,iBAAmB,qCAAqC,oBAAsB,wCAAwC,kBAAoB,sCAAsC,mBAAqB,uCAAuC,oBAAsB,wCAAwC,mBAAqB,uCAAuC,eAAiB,mCAAmC,gBAAkB,oCAAoC,UAAY,8BAA8B,mBAAqB,uCAAuC,gBAAkB,oCAAoC,iBAAmB,qCAAqC,cAAgB,kCAAkC,aAAe,iCAAiC,cAAgB,oC,mBCA5nCD,EAAOC,QAAU,CAAC,KAAO,yBAAyB,OAAS,2BAA2B,aAAe,iCAAiC,OAAS,2BAA2B,aAAe,iCAAiC,QAAU,8B,mBCApOD,EAAOC,QAAU,CAAC,KAAO,6BAA6B,eAAiB,uCAAuC,QAAU,gCAAgC,OAAS,iC,mBCAjKD,EAAOC,QAAU,CAAC,UAAY,gCAAgC,QAAU,8BAA8B,eAAiB,qCAAqC,cAAgB,oCAAoC,YAAc,oC,mBCA9ND,EAAOC,QAAU,CAAC,QAAU,wBAAwB,OAAS,uBAAuB,aAAe,6BAA6B,OAAS,yB,wICmB5HC,EAAeC,IAAMC,cAA6B,CAC7DC,WAAY,CAACC,QAAS,MACtBC,iBAAkB,EAClBC,iBAAkB,EAClBC,oBAAqB,aACrBC,oBAAqB,aACrBC,WAAY,CAACL,QAAS,MACtBM,iBAAkB,EAClBC,iBAAkB,EAClBC,oBAAqB,aACrBC,oBAAqB,aACrBC,MAAO,EACPC,SAAU,aACVC,WAAY,EACZC,cAAe,eAmCFC,EAhCiB,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SAC1BhB,EAAaiB,iBAAc,MAC3BX,EAAaW,iBAAc,MACjC,EAAgDnB,IAAMoB,SAAS,GAA/D,mBAAOhB,EAAP,KAAyBE,EAAzB,KACA,EAAgDN,IAAMoB,SAAS,GAA/D,mBAAOf,EAAP,KAAyBE,EAAzB,KACA,EAAgDP,IAAMoB,SAAS,GAA/D,mBAAOX,EAAP,KAAyBE,EAAzB,KACA,EAAgDX,IAAMoB,SAAS,GAA/D,mBAAOV,EAAP,KAAyBE,EAAzB,KACA,EAA0BZ,IAAMoB,SAAS,GAAzC,mBAAOP,EAAP,KAAcC,EAAd,KACA,EAAoCd,IAAMoB,SAAS,GAAnD,mBAAOL,EAAP,KAAmBC,EAAnB,KAEA,OACE,cAACjB,EAAasB,SAAd,CAAuBC,MAAO,CAC5BpB,aACAE,mBACAC,mBACAC,sBACAC,sBACAC,aACAC,mBACAC,mBACAC,sBACAC,sBACAC,QACAC,WACAC,aACAC,iBAdF,SAgBGE,KChEQ,UAA0B,wC,QCmE1BK,EAxDC,WACd,IAAMC,EAAaxB,IAAMmB,OAAmB,MAC5C,EAOInB,IAAMyB,WAAW1B,GANnBS,EADF,EACEA,WACAG,EAFF,EAEEA,oBACAC,EAHF,EAGEA,oBACAR,EAJF,EAIEA,iBACAC,EALF,EAKEA,iBACAQ,EANF,EAMEA,MAGIa,EAAiB,CACrBC,MAAOC,OAAOC,WAAahB,EAC3BiB,OAAQF,OAAOG,YAAclB,GAY/B,OACE,cAAC,QAAD,CACEc,MAhCiB,IAiCjBG,OAhCkB,IAiClBE,IAAKxB,EACLyB,OAAQC,MACRC,OAAQC,MALV,SAYE,cAAC,IAAD,CAAOC,GAAG,UAAV,SACE,cAAC,IAAD,CACEC,EAAGlC,EACHmC,EAAGlC,EACHmC,WAzBR,WACE,GAA2B,OAAvBhB,EAAWrB,QAAkB,CAC/B,MAAiBqB,EAAWrB,QAAQsC,cAA5BH,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACX5B,GAAyB,EAAL2B,GACpB1B,GAAyB,EAAL2B,KAsBhBG,WAAS,EACTf,MAAOD,EAAeC,MACtBG,OAAQJ,EAAeI,OACvBa,KAAK,0BACLC,OAAO,UACPC,YAAa,EACbb,IAAKR,SCJAsB,EA9CC,WACd,IAAOC,ECTF,SAAkBC,EAAaC,GACpC,MAA0BjD,IAAMoB,SAG7B,CAAC2B,WAAOG,EAAWC,OAAQ,YAH9B,mBAAOC,EAAP,KAAcC,EAAd,KAmCA,OA9BArD,IAAMsD,WACJ,WACE,GAAKN,EAAL,CACA,IAAMO,EAAMC,SAASC,cAAc,OAenC,OALAF,EAAIG,iBAAiB,OAAQC,GAC7BJ,EAAIG,iBAAiB,QAASE,GAC9BX,IAAgBM,EAAIN,YAAcA,GAClCM,EAAIM,IAAMb,EAEH,WACLO,EAAIO,oBAAoB,OAAQH,GAChCJ,EAAIO,oBAAoB,QAASF,GACjCP,EAAS,CAACN,WAAOG,EAAWC,OAAQ,aAhBtC,SAASQ,IACPN,EAAS,CAAEN,MAAOQ,EAAKJ,OAAQ,WAGjC,SAASS,IACPP,EAAS,CAAEN,WAAOG,EAAWC,OAAQ,cAczC,CAACH,EAAKC,IAMDG,ED3BSW,CAASC,GAAlBjB,MACP,EAMI/C,IAAMyB,WAAW1B,GALnBG,EADF,EACEA,WACAI,EAFF,EAEEA,oBACAC,EAHF,EAGEA,oBACAM,EAJF,EAIEA,MACAC,EALF,EAKEA,SAmBF,OACE,8BACE,cAAC,IAAD,CACEa,MD/BsB,ICgCtBG,OD/BuB,ICgCvBG,OAAQpB,EACRsB,OAAQtB,EACR2B,WAfN,WACE,GAA2B,OAAvBtC,EAAWC,QAAkB,CAC/B,MAAiBD,EAAWC,QAAQsC,cAA5BH,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EACXjC,GAAqBgC,GACrB/B,GAAqBgC,KAYnBG,WAAW,EACXuB,QAzBN,SAAmBC,GAEjB,GAAc,OADAhE,EAAWC,QACL,CAClB,IAAMgE,EAAWD,EAAME,IAAIC,OAAS,EAf1B,KAe8BxD,EAAkBA,EAfhD,KAgBVC,EAASqD,KAsBPnC,IAAK9B,EARP,SAUE,cAAC,IAAD,CAAOmC,GAAG,cAAV,SACE,cAAC,IAAD,CAAOU,MAAOA,W,yBE7BTuB,EAhBc,SAAC,GAAgB,IAAfpD,EAAc,EAAdA,SAC7B,OACE,sBAAKqD,UAAWC,IAAOC,KAAvB,UACE,qBAAKF,UAAWC,IAAOE,OAAvB,SACE,sBAAKH,UAAWC,IAAOG,aAAvB,UACE,cAAC,IAAD,CAASC,GAAG,mBAAmBL,UAAWC,IAAOK,OAAQC,gBAAiBN,IAAOO,aAAjF,0EACA,cAAC,IAAD,CAASH,GAAG,UAAUL,UAAWC,IAAOK,OAAQC,gBAAiBN,IAAOO,aAAxE,uDAGJ,qBAAKR,UAAWC,IAAOQ,QAAvB,SACG9D,Q,iBCmBM+D,EA1BQ,WAErB,IAAMC,EAAkB,SAACC,GACvBC,aAAaC,QAAQ,eAAgBC,KAAKC,UAAU,CAACJ,cAAaK,WAAY,IAAIC,SAGpF,OACE,cAAC,EAAD,UACE,cAAC,EAAD,UACE,sBAAKlB,UAAWC,IAAOkB,KAAvB,UACE,cAAC,EAAD,IACA,qBAAKnB,UAAWC,IAAOmB,eAAvB,SACE,cAAC,EAAD,MAEF,sBAAKpB,UAAWC,IAAOoB,QAAvB,UACE,wBAAQrB,UAAWC,IAAOqB,OAAQC,QAAS,kBAAMZ,EAAgB,2CAAjE,oDACA,wBAAQX,UAAWC,IAAOqB,OAAQC,QAAS,kBAAMZ,EAAgB,2CAAjE,oDACA,wBAAQX,UAAWC,IAAOqB,OAAQC,QAAS,kBAAMZ,EAAgB,2CAAjE,oDACA,wBAAQX,UAAWC,IAAOqB,OAAQC,QAAS,kBAAMZ,EAAgB,2CAAjE,+D,yBCwIGa,EA3JI,WACjB,MAA0B/F,IAAMoB,SAAqB,IAArD,mBAAO4E,EAAP,KAAcC,EAAd,KACMC,EAAYlG,IAAMmB,QAAO,GACzBgF,EAAenG,IAAMmB,OAA8B,MACzD,EAA0CnB,IAAMoB,SAAS,CAACO,MAAO,EAAGG,OAAQ,IAA5E,mBAAOsE,EAAP,KAAsBC,EAAtB,KA0CA,OATArG,IAAMsD,WAAU,WACV6C,EAAahG,SACfkG,EAAiB,CACf1E,MAAOwE,EAAahG,QAAQmG,YAC5BxE,OAAQqE,EAAahG,QAAQoG,iBAGhC,CAACJ,EAAahG,UAGf,eAAC,EAAD,WACE,mBAAGoE,UAAWC,IAAOgC,MAArB,4DACA,sBAAKjC,UAAWC,IAAOiC,UAAvB,UACE,qBAAKlC,UAAWC,IAAOkC,mBAAvB,SACE,sBAAKnC,UAAWC,IAAOmC,UAAW3E,IAAKmE,EAAvC,UACE,wBAAQ5B,UAAWC,IAAOoC,gBAAiBd,QACzC,kBAAMG,GAAS,SAAAY,GAAS,OAAIA,EAAUC,MAAM,EAAGD,EAAUE,OAAS,OADpE,oBAEA,cAAC,IAAD,CACEpF,MAAOyE,EAAczE,MACrBG,OAAQsE,EAActE,OACtBkF,YAlDY,SAACC,GAAqC,IAAD,EAC3Df,EAAU/F,SAAU,EACpB,IAAM+G,EAAG,UAAGD,EAAEE,OAAOC,kBAAZ,aAAG,EAAqBC,qBACjCpB,GAAS,SAAAY,GACP,MAAM,GAAN,mBAAWA,GAAX,CAAsB,CAACK,EAAK5E,EAAG4E,EAAK3E,SA+C5B+E,YA3CY,SAACL,GAEvB,GAAKf,EAAU/F,QAAf,CAGA,IACMoH,EADQN,EAAEE,OAAOC,WACHC,qBACpBpB,GAAS,SAAAY,GACP,MAAM,GAAN,mBAAWA,EAAUC,MAAM,EAAGD,EAAUE,OAAS,IAAjD,uBAAyDF,EAAUA,EAAUE,OAAS,IAAtF,CAA0FQ,EAAMjF,EAAGiF,EAAMhF,WAoCjGiF,UAhCU,WACpBtB,EAAU/F,SAAU,EACpB8F,GAAS,SAAAY,GACP,IAAMY,EAAWZ,EAAUA,EAAUE,OAAS,GAC9C,MAAM,GAAN,mBAAWF,EAAUC,MAAM,EAAGD,EAAUE,OAAS,IAAjD,uBACQU,GADR,CACkBA,EAAS,GAAIA,EAAS,WAsBlC,SAOE,cAAC,IAAD,UACGzB,EAAM0B,KAAI,SAACC,EAAMC,GAAP,OACT,cAAC,IAAD,CAEEC,OAAQF,EACR/E,OAAO,MACPC,YAAa,EACbiF,QAAS,GACTC,QAAQ,QACRC,yBAAyB,cACzBrF,KAAK,uBACLsF,OAAQL,IAAM5B,EAAMe,OAAS,IAAKb,EAAU/F,SARvCyH,eAejB,sBAAKrD,UAAWC,IAAO0D,WAAvB,UACE,qBAAK3D,UAAWC,IAAO2D,kBAAvB,SACE,sBAAK5D,UAAWC,IAAO4D,gBAAvB,UACE,wBAAQ7D,UAAWC,IAAO6D,iBAA1B,oBACA,wBAAQ9D,UAAWC,IAAO8D,oBAA1B,oBACA,wBAAQ/D,UAAWC,IAAO+D,kBAA1B,oBACA,wBAAQhE,UAAWC,IAAOgE,mBAA1B,oBACA,wBAAQjE,UAAWC,IAAOiE,oBAA1B,oBACA,wBAAQlE,UAAWC,IAAOkE,mBAA1B,oBACA,wBAAQnE,UAAWC,IAAOmE,eAA1B,eACA,wBAAQpE,UAAWC,IAAOoE,gBAA1B,yBAGJ,sBAAKrE,UAAWC,IAAOqE,iBAAvB,UACE,wBAAQtE,UAAWC,IAAOsE,cAA1B,wDACA,wBAAQvE,UAAWC,IAAOuE,aAA1B,oEACA,wBAAQxE,UAAWC,IAAOwE,cAA1B,+D,iBCSGC,EAxGA,WACb,MAA4CjJ,IAAMoB,UAAS,GAA3D,mBAAO8H,EAAP,KAAuBC,EAAvB,KAEA,EAAkBnJ,IAAMoB,SAAS,CAC/B,uIACA,uIACA,uIACA,yHACA,2FACA,gFANKwE,EAAP,oBAQA,EAAoC5F,IAAMoB,SAAwB,MAAlE,mBAAmBgI,GAAnB,WACA,EAAsCpJ,IAAMoB,UAAS,GAArD,mBAAoBiI,GAApB,WACA,EAA0BrJ,IAAMoB,SAAqB,IAArD,mBAEMkI,GAFN,UACkBtJ,IAAMmB,QAAO,GACVnB,IAAMmB,OAAO,CAACgE,YAAa,GAAIK,WAAY,IAAIC,QA+BpE,OAlBAzF,IAAMsD,WAAU,WACd,IAAMiG,EAAqBjE,KAAKkE,MAAMpE,aAAaqE,QAAQ,iBAAmB,QAC1EF,EAAmBpJ,UACrBmJ,EAAanJ,QAAUoJ,GAGzB,IAAMG,EAAuBC,aAAY,WACvC,IAAMJ,EAAqBjE,KAAKkE,MAAMpE,aAAaqE,QAAQ,iBAAmB,QAC1EF,GAAsB,IAAI9D,KAAK8D,EAAmB/D,YAAc,IAAIC,KAAK6D,EAAanJ,QAAQqF,cAChG8D,EAAanJ,QAAUoJ,EACvBH,EAAcG,EAAmBpE,aACjCkE,GAAe,MAEhB,KAEH,OAAO,kBAAMO,cAAcF,MAC1B,IAGD,eAAC,EAAD,WACE,wBACEG,MAAO,CAACC,SAAU,WAAYC,IAAK,GAAIC,KAAM,IAC7ClE,QAAS,kBAAMqD,GAAkB,SAAAtC,GAAS,OAAKA,MAFjD,sFAIA,qBAAKtC,UAAWC,IAAOoB,QAAvB,SACGA,EAAQ8B,KAAI,SAAC7B,EAAQoE,GAAT,OACX,cAAC,IAAD,CAAmBrF,GAAG,iBAAiBL,UAAS,UAAKC,IAAOqB,OAAZ,YAAgC,IAAVoE,GAAef,EAAiB1E,IAAO0F,aAAe,KAAjHrE,Y,iBCzCNsE,EAdM,WACnB,IAAMC,EAAUC,cAChB,OACE,eAAC,EAAD,WACE,qBAAK9F,UAAWC,IAAOmC,YACvB,sBAAKpC,UAAWC,IAAO8F,QAAvB,UACE,wBAAQ/F,UAAWC,IAAO+F,eAA1B,mDACA,wBAAQhG,UAAWC,IAAOgG,cAAe1E,QAASsE,EAAQK,OAA1D,wDACA,cAAC,IAAD,CAAMlG,UAAWC,IAAOkG,YAAa9F,GAAG,eAAxC,wICMO+F,MAZf,WACE,OACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,mBAAmBC,UAAW5F,IAC1C,cAAC,IAAD,CAAO2F,KAAK,eAAeC,UAAW9E,IACtC,cAAC,IAAD,CAAO6E,KAAK,UAAUC,UAAW5B,EAAQ6B,OAAK,IAC9C,cAAC,IAAD,CAAOF,KAAK,iBAAiBC,UAAWV,IACxC,cAAC,IAAD,CAAUvF,GAAG,qBCRnBmG,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJzH,SAAS0H,eAAe,W","file":"static/js/main.ac3f2935.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"zones\":\"AdminPanel_zones__3DwSJ\",\"zone\":\"AdminPanel_zone__2F3c2\",\"zoneTitle\":\"AdminPanel_zoneTitle__1HiWl\",\"title\":\"AdminPanel_title__11Zqu\",\"container\":\"AdminPanel_container__3eCw1\",\"rightPanel\":\"AdminPanel_rightPanel__22G42\",\"joystickContainer\":\"AdminPanel_joystickContainer__2BP-F\",\"joystickButtons\":\"AdminPanel_joystickButtons__2e66-\",\"joystickTopArrow\":\"AdminPanel_joystickTopArrow__204dw\",\"joystickBottomArrow\":\"AdminPanel_joystickBottomArrow__1VgBf\",\"joystickLeftArrow\":\"AdminPanel_joystickLeftArrow__23CaZ\",\"joystickRightArrow\":\"AdminPanel_joystickRightArrow__3b0F4\",\"joystickRotateRight\":\"AdminPanel_joystickRotateRight__16U1K\",\"joystickRotateLeft\":\"AdminPanel_joystickRotateLeft__14qMv\",\"joystickZoomIn\":\"AdminPanel_joystickZoomIn__3CKfw\",\"joystickZoomOut\":\"AdminPanel_joystickZoomOut__PKJAe\",\"broadcast\":\"AdminPanel_broadcast__2la3F\",\"broadcastContainer\":\"AdminPanel_broadcastContainer__z84D9\",\"prevStateButton\":\"AdminPanel_prevStateButton__2x7pt\",\"actionsContainer\":\"AdminPanel_actionsContainer__1rHKd\",\"actionsCreate\":\"AdminPanel_actionsCreate__3z6kn\",\"actionsApply\":\"AdminPanel_actionsApply__4yOBR\",\"actionsCancel\":\"AdminPanel_actionsCancel__1FGU4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"PageLayout_page__2ddSV\",\"navbar\":\"PageLayout_navbar__c0dvT\",\"buttonsGroup\":\"PageLayout_buttonsGroup__1ehu0\",\"button\":\"PageLayout_button__e9sQ7\",\"buttonActive\":\"PageLayout_buttonActive__3Y8HV\",\"content\":\"PageLayout_content__1-Xq7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"maps\":\"MnemonicScheme_maps__3xjpY\",\"minimapWrapper\":\"MnemonicScheme_minimapWrapper__1zZap\",\"cameras\":\"MnemonicScheme_cameras__SPeUA\",\"camera\":\"MnemonicScheme_camera__169tT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"broadcast\":\"OnlineCamera_broadcast__2TFg0\",\"actions\":\"OnlineCamera_actions__2IymO\",\"actionsArchive\":\"OnlineCamera_actionsArchive__fpBTJ\",\"actionsGoBack\":\"OnlineCamera_actionsGoBack__1k7eK\",\"actionsEdit\":\"OnlineCamera_actionsEdit__16MNs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cameras\":\"Online_cameras__1R824\",\"camera\":\"Online_camera__1KAV9\",\"cameraActive\":\"Online_cameraActive___HYUK\",\"active\":\"Online_active__2SRla\"};","import React, {useRef} from \"react\"\nimport {Stage} from \"konva/lib/Stage\"\n\ninterface IZonesContext {\n  fullMapRef: React.MutableRefObject<Stage | null>\n  fullMapXPosition: number\n  fullMapYPosition: number\n  setFullMapXPosition: React.Dispatch<React.SetStateAction<number>>\n  setFullMapYPosition: React.Dispatch<React.SetStateAction<number>>\n  miniMapRef: React.MutableRefObject<Stage | null>\n  miniMapXPosition: number\n  miniMapYPosition: number\n  setMiniMapXPosition: React.Dispatch<React.SetStateAction<number>>\n  setMiniMapYPosition: React.Dispatch<React.SetStateAction<number>>\n  scale: number,\n  setScale: React.Dispatch<React.SetStateAction<number>>\n  scaleDelta: number\n  setScaleDelta: React.Dispatch<React.SetStateAction<number>>\n}\n\nexport const ZonesContext = React.createContext<IZonesContext>({\n  fullMapRef: {current: null},\n  fullMapXPosition: 0,\n  fullMapYPosition: 0,\n  setFullMapXPosition: () => {},\n  setFullMapYPosition: () => {},\n  miniMapRef: {current: null},\n  miniMapXPosition: 0,\n  miniMapYPosition: 0,\n  setMiniMapXPosition: () => {},\n  setMiniMapYPosition: () => {},\n  scale: 1,\n  setScale: () => {},\n  scaleDelta: 0,\n  setScaleDelta: () => {}\n})\n\nconst ZonesProvider: React.FC = ({children}) => {\n  const fullMapRef = useRef<Stage>(null)\n  const miniMapRef = useRef<Stage>(null)\n  const [fullMapXPosition, setFullMapXPosition] = React.useState(0)\n  const [fullMapYPosition, setFullMapYPosition] = React.useState(0)\n  const [miniMapXPosition, setMiniMapXPosition] = React.useState(0)\n  const [miniMapYPosition, setMiniMapYPosition] = React.useState(0)\n  const [scale, setScale] = React.useState(1)\n  const [scaleDelta, setScaleDelta] = React.useState(0)\n\n  return (\n    <ZonesContext.Provider value={{\n      fullMapRef,\n      fullMapXPosition,\n      fullMapYPosition,\n      setFullMapXPosition,\n      setFullMapYPosition,\n      miniMapRef,\n      miniMapXPosition,\n      miniMapYPosition,\n      setMiniMapXPosition,\n      setMiniMapYPosition,\n      scale,\n      setScale,\n      scaleDelta,\n      setScaleDelta\n    }}>\n      {children}\n    </ZonesContext.Provider>\n  )\n}\n\nexport default ZonesProvider\n","export default __webpack_public_path__ + \"static/media/zones-plan.fbffd0f7.jpeg\";","import React from 'react'\nimport {ZonesContext} from \"../context/ZonesContext\"\nimport {Stage} from \"react-konva/lib/ReactKonvaCore\"\nimport {Layer, Rect} from \"react-konva\"\nimport IRect from \"konva/lib/shapes/Rect\"\n\nconst MINI_MAP_WIDTH = 271;\nconst MINI_MAP_HEIGHT = 271;\nexport const FULL_MAP_WIDTH = 2000;\nexport const FULL_MAP_HEIGHT = 2000;\n\nconst MiniMap = () => {\n  const viewBoxRef = React.useRef<IRect.Rect>(null)\n  const {\n    miniMapRef,\n    setMiniMapXPosition,\n    setMiniMapYPosition,\n    fullMapXPosition,\n    fullMapYPosition,\n    scale\n  } = React.useContext(ZonesContext)\n\n  const viewDimensions = {\n    width: window.innerWidth / scale,\n    height: window.innerHeight / scale\n  }\n  // const devices: any[] = []\n\n  function handleDragMove() {\n    if (viewBoxRef.current !== null) {\n      const { x, y } = viewBoxRef.current.getPosition();\n      setMiniMapXPosition(x * -1);\n      setMiniMapYPosition(y * -1);\n    }\n  }\n\n  return (\n    <Stage\n      width={MINI_MAP_WIDTH}\n      height={MINI_MAP_HEIGHT}\n      ref={miniMapRef}\n      scaleX={MINI_MAP_WIDTH / FULL_MAP_WIDTH}\n      scaleY={MINI_MAP_HEIGHT / FULL_MAP_HEIGHT}\n    >\n      {/*<Layer id='screens'>*/}\n      {/*  <Group>*/}\n      {/*    {devices}*/}\n      {/*  </Group>*/}\n      {/*</Layer>*/}\n      <Layer id='viewbox'>\n        <Rect\n          x={fullMapXPosition}\n          y={fullMapYPosition}\n          onDragMove={handleDragMove}\n          draggable\n          width={viewDimensions.width}\n          height={viewDimensions.height}\n          fill='rgba(86, 204, 242, 0.1)'\n          stroke='#2d9cdb'\n          strokeWidth={2}\n          ref={viewBoxRef}\n        />\n      </Layer>\n    </Stage>\n  )\n}\n\nexport default MiniMap\n","import React from 'react'\nimport {Image, Layer, Stage} from \"react-konva\"\nimport {ZonesContext} from \"../context/ZonesContext\"\nimport {useImage} from \"../hooks/useImage\"\nimport zonesPlanImage from \"../assets/zones-plan.jpeg\"\nimport {KonvaEventObject} from \"konva/lib/Node\"\nimport {FULL_MAP_HEIGHT, FULL_MAP_WIDTH} from \"./MiniMap\"\n\nconst scaleBy = 1.03;\n\nconst FullMap = () => {\n  const {image} = useImage(zonesPlanImage)\n  const {\n    fullMapRef,\n    setFullMapXPosition,\n    setFullMapYPosition,\n    scale,\n    setScale\n  } = React.useContext(ZonesContext)\n\n  function zoomStage(event: KonvaEventObject<WheelEvent>) {\n    const stage = fullMapRef.current\n    if (stage !== null) {\n      const newScale = event.evt.deltaY > 0 ? scale * scaleBy : scale / scaleBy;\n      setScale(newScale)\n    }\n  }\n\n  function handleDragMove() {\n    if (fullMapRef.current !== null) {\n      const { x, y } = fullMapRef.current.getPosition();\n      setFullMapXPosition(-x);\n      setFullMapYPosition(-y);\n    }\n  }\n\n  return (\n    <div>\n      <Stage\n        width={FULL_MAP_WIDTH}\n        height={FULL_MAP_HEIGHT}\n        scaleX={scale}\n        scaleY={scale}\n        onDragMove={handleDragMove}\n        draggable={true}\n        onWheel={zoomStage}\n        ref={fullMapRef}\n      >\n        <Layer id='stuffToShow'>\n          <Image image={image} />\n        </Layer>\n      </Stage>\n    </div>\n  )\n}\n\nexport default FullMap\n","import React from \"react\"\n\nexport function useImage(url: string, crossOrigin?: string) {\n  const [state, setState] = React.useState<{\n    image: HTMLImageElement | undefined,\n    status: 'loading' | 'loaded' | 'failed'\n  }>({image: undefined, status: \"loading\"});\n\n  React.useEffect(\n    function () {\n      if (!url) return;\n      const img = document.createElement('img');\n\n      function onload() {\n        setState({ image: img, status: 'loaded' });\n      }\n\n      function onerror() {\n        setState({ image: undefined, status: 'failed' });\n      }\n\n      img.addEventListener('load', onload);\n      img.addEventListener('error', onerror);\n      crossOrigin && (img.crossOrigin = crossOrigin);\n      img.src = url;\n\n      return function cleanup() {\n        img.removeEventListener('load', onload);\n        img.removeEventListener('error', onerror);\n        setState({image: undefined, status: 'loading'});\n      };\n    },\n    [url, crossOrigin]\n  );\n\n  // return array because it it better to use in case of several useImage hooks\n  // const [background, backgroundStatus] = useImage(url1);\n  // const [patter] = useImage(url2);\n  return state\n}\n","import React from 'react'\nimport {NavLink} from \"react-router-dom\"\nimport styles from './PageLayout.module.sass'\n\nconst PageLayout: React.FC = ({children}) => {\n  return (\n    <div className={styles.page}>\n      <div className={styles.navbar}>\n        <div className={styles.buttonsGroup}>\n          <NavLink to='/mnemonic-scheme' className={styles.button} activeClassName={styles.buttonActive}>Мнемосхема</NavLink>\n          <NavLink to='/online' className={styles.button} activeClassName={styles.buttonActive}>Онлайн</NavLink>\n        </div>\n      </div>\n      <div className={styles.content}>\n        {children}\n      </div>\n    </div>\n  )\n}\n\nexport default PageLayout\n","import React from 'react'\nimport FullMap from \"../../components/FullMap\"\nimport MiniMap from \"../../components/MiniMap\"\nimport ZonesProvider from \"../../context/ZonesContext\"\nimport PageLayout from \"../../components/PageLayout/PageLayout\"\nimport styles from './MnemonicScheme.module.sass'\n\nconst MnemonicScheme = () => {\n\n  const setActiveCamera = (cameraTitle: string) => {\n    localStorage.setItem('activeCamera', JSON.stringify({cameraTitle, lastUpdate: new Date()}))\n  }\n\n  return (\n    <PageLayout>\n      <ZonesProvider>\n        <div className={styles.maps}>\n          <FullMap />\n          <div className={styles.minimapWrapper}>\n            <MiniMap />\n          </div>\n          <div className={styles.cameras}>\n            <button className={styles.camera} onClick={() => setActiveCamera('Камера 1')}>Камера 1</button>\n            <button className={styles.camera} onClick={() => setActiveCamera('Камера 2')}>Камера 2</button>\n            <button className={styles.camera} onClick={() => setActiveCamera('Камера 3')}>Камера 3</button>\n            <button className={styles.camera} onClick={() => setActiveCamera('Камера 4')}>Камера 4</button>\n          </div>\n        </div>\n      </ZonesProvider>\n    </PageLayout>\n  )\n}\n\nexport default MnemonicScheme\n","import React from 'react'\nimport styles from './AdminPanel.module.sass'\nimport PageLayout from \"../../components/PageLayout/PageLayout\"\nimport {Layer, Line, Stage} from \"react-konva\"\nimport {KonvaEventObject} from \"konva/lib/Node\"\n\nconst AdminPanel = () => {\n  const [lines, setLines] = React.useState<number[][]>([]);\n  const isDrawing = React.useRef(false);\n  const broadcastRef = React.useRef<HTMLDivElement | null>(null)\n  const [broadcastSize, setBroadcastSize] = React.useState({width: 0, height: 0})\n\n\n  const handleMouseDown = (e: KonvaEventObject<MouseEvent>) => {\n    isDrawing.current = true;\n    const pos = e.target.getStage()?.getPointerPosition();\n    setLines(prevState => {\n      return [...prevState, [pos!.x, pos!.y]]\n    });\n  };\n\n  const handleMouseMove = (e: KonvaEventObject<MouseEvent>) => {\n    // no drawing - skipping\n    if (!isDrawing.current) {\n      return;\n    }\n    const stage = e.target.getStage()!;\n    const point = stage.getPointerPosition()!;\n    setLines(prevState => {\n      return [...prevState.slice(0, prevState.length - 1), [...prevState[prevState.length - 1], point.x, point.y]]\n    })\n  };\n\n  const handleMouseUp = () => {\n    isDrawing.current = false;\n    setLines(prevState => {\n      const lastLine = prevState[prevState.length - 1]\n      return [...prevState.slice(0, prevState.length - 1),\n          [...lastLine, lastLine[0], lastLine[1]]\n      ]\n    })\n  };\n\n  React.useEffect(() => {\n    if (broadcastRef.current) {\n      setBroadcastSize({\n        width: broadcastRef.current.clientWidth,\n        height: broadcastRef.current.clientHeight\n      })\n    }\n  }, [broadcastRef.current])\n\n  return (\n    <PageLayout>\n      <p className={styles.title}>камера 123123423</p>\n      <div className={styles.container}>\n        <div className={styles.broadcastContainer}>\n          <div className={styles.broadcast} ref={broadcastRef}>\n            <button className={styles.prevStateButton} onClick={\n              () => setLines(prevState => prevState.slice(0, prevState.length - 1))}>&#x2190;</button>\n            <Stage\n              width={broadcastSize.width}\n              height={broadcastSize.height}\n              onMouseDown={handleMouseDown}\n              onMousemove={handleMouseMove}\n              onMouseUp={handleMouseUp}\n            >\n              <Layer>\n                {lines.map((line, i) => (\n                  <Line\n                    key={i}\n                    points={line}\n                    stroke=\"red\"\n                    strokeWidth={2}\n                    tension={0.5}\n                    lineCap=\"round\"\n                    globalCompositeOperation='source-over'\n                    fill='rgba(255, 0, 0, 0.2)'\n                    closed={i === lines.length - 1 ? !isDrawing.current : true}\n                  />\n                ))}\n              </Layer>\n            </Stage>\n          </div>\n        </div>\n        <div className={styles.rightPanel}>\n          <div className={styles.joystickContainer}>\n            <div className={styles.joystickButtons}>\n              <button className={styles.joystickTopArrow}>&#x2191;</button>\n              <button className={styles.joystickBottomArrow}>&#x2193;</button>\n              <button className={styles.joystickLeftArrow}>&#x2190;</button>\n              <button className={styles.joystickRightArrow}>&#x2192;</button>\n              <button className={styles.joystickRotateRight}>&#x27F3;</button>\n              <button className={styles.joystickRotateLeft}>&#x27F2;</button>\n              <button className={styles.joystickZoomIn}>&#x2b;</button>\n              <button className={styles.joystickZoomOut}>&#x2212;</button>\n            </div>\n          </div>\n          <div className={styles.actionsContainer}>\n            <button className={styles.actionsCreate}>Создать</button>\n            <button className={styles.actionsApply}>Применить</button>\n            <button className={styles.actionsCancel}>Отмена</button>\n          </div>\n        </div>\n      </div>\n      {/*<div className={styles.zones}>*/}\n      {/*  {*/}\n      {/*    zones.map(zone => (*/}\n      {/*      <div className={styles.zone} key={zone}>*/}\n      {/*        <p className={styles.zoneTitle} onClick={() => activateZone(zone)}>{zone}</p>*/}\n      {/*      </div>*/}\n      {/*    ))*/}\n      {/*  }*/}\n      {/*</div>*/}\n      {/*<Modal isOpen={isModalOpen} closeHandler={closeModalHandler}>*/}\n      {/*  <p className={styles.modalTitle}>{activeZone}</p>*/}\n      {/*  <div className={styles.modalContainer}>*/}\n      {/*    <div className={styles.joystickContainer}>*/}\n      {/*      <button className={styles.joystickButton}>Влево</button>*/}\n      {/*      <button className={styles.joystickButton}>Вправо</button>*/}\n      {/*    </div>*/}\n      {/*    <div className={styles.broadcastContainer}>*/}\n      {/*      <div className={styles.broadcast}>*/}\n      {/*        <button className={styles.prevStateButton} onClick={*/}\n      {/*          () => setLines(prevState => prevState.slice(0, prevState.length - 1))}>&#x2190;</button>*/}\n      {/*        <Stage*/}\n      {/*          width={500}*/}\n      {/*          height={500}*/}\n      {/*          onMouseDown={handleMouseDown}*/}\n      {/*          onMousemove={handleMouseMove}*/}\n      {/*          onMouseUp={handleMouseUp}*/}\n      {/*        >*/}\n      {/*          <Layer>*/}\n      {/*            {lines.map((line, i) => (*/}\n      {/*              <Line*/}\n      {/*                key={i}*/}\n      {/*                points={line}*/}\n      {/*                stroke=\"red\"*/}\n      {/*                strokeWidth={2}*/}\n      {/*                tension={0.5}*/}\n      {/*                lineCap=\"round\"*/}\n      {/*                globalCompositeOperation='source-over'*/}\n      {/*                fill='rgba(255, 0, 0, 0.2)'*/}\n      {/*                closed={i === lines.length - 1 ? !isDrawing.current : true}*/}\n      {/*              />*/}\n      {/*            ))}*/}\n      {/*          </Layer>*/}\n      {/*        </Stage>*/}\n      {/*      </div>*/}\n      {/*    </div>*/}\n      {/*    <div className={styles.actionsContainer}>*/}\n      {/*      <button className={styles.actionsCreate}>Создать</button>*/}\n      {/*      <button className={styles.actionsApply}>Применить</button>*/}\n      {/*      <button className={styles.actionsCancel}>Отмена</button>*/}\n      {/*    </div>*/}\n      {/*  </div>*/}\n      {/*</Modal>*/}\n    </PageLayout>\n  )\n}\n\nexport default AdminPanel\n","import React from 'react'\nimport {Link} from \"react-router-dom\"\nimport PageLayout from \"../../components/PageLayout/PageLayout\"\nimport styles from './Online.module.sass'\nimport {KonvaEventObject} from \"konva/lib/Node\"\n\nconst Online = () => {\n  const [isActiveCamera, setIsActiveCamera] = React.useState(false)\n\n  const [cameras] = React.useState([\n    'Зона 1 Упаковочная машина 3',\n    'Зона 2 Упаковочная машина 2',\n    'Зона 3 Упаковочная машина 1',\n    'Зона 4 Магазин поддонов',\n    'Зона 5 Стрейч-Хууд',\n    'Зона 6 Штабелер'\n  ])\n  const [activeZone, setActiveZone] = React.useState<string | null>(null)\n  const [isModalOpen, setIsModalOpen] = React.useState(false)\n  const [lines, setLines] = React.useState<number[][]>([]);\n  const isDrawing = React.useRef(false);\n  const activeCamera = React.useRef({cameraTitle: '', lastUpdate: new Date()})\n\n  const activateZone = (zone: string) => {\n    setActiveZone(zone)\n    setIsModalOpen(true)\n  }\n\n  const closeModalHandler = () => {\n    setIsModalOpen(false)\n    setLines([])\n    setActiveZone(null)\n  }\n\n  React.useEffect(() => {\n    const activeCameraFromLS = JSON.parse(localStorage.getItem('activeCamera') || 'null')\n    if (activeCameraFromLS.current) {\n      activeCamera.current = activeCameraFromLS\n    }\n\n    const activeCameraListener = setInterval(() => {\n      const activeCameraFromLS = JSON.parse(localStorage.getItem('activeCamera') || 'null')\n      if (activeCameraFromLS && new Date(activeCameraFromLS.lastUpdate) > new Date(activeCamera.current.lastUpdate)) {\n        activeCamera.current = activeCameraFromLS\n        setActiveZone(activeCameraFromLS.cameraTitle)\n        setIsModalOpen(true)\n      }\n    }, 100)\n\n    return () => clearInterval(activeCameraListener)\n  }, [])\n\n  return (\n    <PageLayout>\n      <button\n        style={{position: 'absolute', top: 15, left: 70}}\n        onClick={() => setIsActiveCamera(prevState => !prevState)}>\n        Активировать</button>\n      <div className={styles.cameras}>\n        {cameras.map((camera, index) => (\n          <Link key={camera} to='/online/camera' className={`${styles.camera} ${index === 2 && isActiveCamera ? styles.cameraActive : ''}`} />\n        ))}\n      </div>\n      {/*<Modal isOpen={isModalOpen} closeHandler={closeModalHandler}>*/}\n      {/*  <p className={styles.modalTitle}>{activeZone}</p>*/}\n      {/*  <div className={styles.modalContainer}>*/}\n      {/*    <div className={styles.joystickContainer}>*/}\n      {/*      <button className={styles.joystickButton}>Влево</button>*/}\n      {/*      <button className={styles.joystickButton}>Вправо</button>*/}\n      {/*    </div>*/}\n      {/*    <div className={styles.broadcastContainer}>*/}\n      {/*      <div className={styles.broadcast}>*/}\n      {/*        <button className={styles.prevStateButton} onClick={*/}\n      {/*          () => setLines(prevState => prevState.slice(0, prevState.length - 1))}>&#x2190;</button>*/}\n      {/*        <Stage*/}\n      {/*          width={500}*/}\n      {/*          height={500}*/}\n      {/*          onMouseDown={handleMouseDown}*/}\n      {/*          onMousemove={handleMouseMove}*/}\n      {/*          onMouseUp={handleMouseUp}*/}\n      {/*        >*/}\n      {/*          <Layer>*/}\n      {/*            {lines.map((line, i) => (*/}\n      {/*              <Line*/}\n      {/*                key={i}*/}\n      {/*                points={line}*/}\n      {/*                stroke=\"red\"*/}\n      {/*                strokeWidth={2}*/}\n      {/*                tension={0.5}*/}\n      {/*                lineCap=\"round\"*/}\n      {/*                globalCompositeOperation='source-over'*/}\n      {/*                fill='rgba(255, 0, 0, 0.2)'*/}\n      {/*                closed={i === lines.length - 1 ? !isDrawing.current : true}*/}\n      {/*              />*/}\n      {/*            ))}*/}\n      {/*          </Layer>*/}\n      {/*        </Stage>*/}\n      {/*      </div>*/}\n      {/*    </div>*/}\n      {/*    <div className={styles.actionsContainer}>*/}\n      {/*      <button className={styles.actionsCreate}>Создать</button>*/}\n      {/*      <button className={styles.actionsApply}>Применить</button>*/}\n      {/*      <button className={styles.actionsCancel}>Отмена</button>*/}\n      {/*    </div>*/}\n      {/*  </div>*/}\n      {/*</Modal>*/}\n    </PageLayout>\n  )\n}\n\nexport default Online\n","import React from 'react'\nimport {Link, useHistory} from \"react-router-dom\"\nimport styles from './OnlineCamera.module.sass'\nimport PageLayout from \"../../components/PageLayout/PageLayout\"\n\nconst OnlineCamera = () => {\n  const history = useHistory()\n  return (\n    <PageLayout>\n      <div className={styles.broadcast} />\n      <div className={styles.actions}>\n        <button className={styles.actionsArchive}>В архив</button>\n        <button className={styles.actionsGoBack} onClick={history.goBack}>Обратно</button>\n        <Link className={styles.actionsEdit} to='/admin-panel'>Редактировать камеру</Link>\n      </div>\n    </PageLayout>\n  )\n}\n\nexport default OnlineCamera\n","import React from \"react\"\nimport {Redirect, Route, Switch} from \"react-router-dom\"\nimport MnemonicScheme from \"./pages/MnemonicScheme/MnemonicScheme\"\nimport AdminPanel from \"./pages/AdminPanel/AdminPanel\"\nimport Online from \"./pages/Online/Online\"\nimport OnlineCamera from \"./pages/OnlineCamera/OnlineCamera\"\n\nfunction App() {\n  return (\n    <Switch>\n      <Route path='/mnemonic-scheme' component={MnemonicScheme} />\n      <Route path='/admin-panel' component={AdminPanel} />\n      <Route path='/online' component={Online} exact />\n      <Route path='/online/camera' component={OnlineCamera} />\n      <Redirect to='/admin-panel' />\n    </Switch>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter} from \"react-router-dom\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}